<head>
  <title>votr</title>
</head>

<body>
<h1 class='title'>VOTR</h1>


<div id='menubar'>
	<div class='menu_option'>
		<a href="{{pathFor 'CreatePoll'}}">Votr</a>
	</div>
	<div class='menu_option'>
		<a href="{{pathFor 'Polls'}}">Polls</a>
	</div>
	{{>Account}}
</div>


</body>


<template name="CreatePoll">
	<h1>Create a new poll</h1>

	<form id='create_poll'>
		<label for='poll_name'>Name:</label><input type='text' id='poll_name'>

		{{#each options}}
			{{>CreatePollOption}}
		{{/each}}

		<div id='poll_parameters'>
			<input type='checkbox' checked=1 disabled id='allow_multiple_selections'><label for='allow_multiple_selections'>Allow multiple selections? (nonfunctional)</label>
		</div>
		<div>
			<input type='submit' id='create_poll_button'>
		</div>

	</form>

	<div id='poll_created' class='overlay'>
		<div class='message centered'>
		    Poll created <a href='{{poll_link}}'>{{poll_link}}</a>
		</div>
	</div>

</template>


<template name='CreatePollOption'>
	<div class='create_poll_option'>
		<input type='text' class='poll_option' placeholder='Enter poll option...'>
	</div>
</template>


<template name="Polls">
	

	{{#if anonymous}}
		<h1>You must sign in to see polls</h1>
	{{else}}
		<h1>Your polls</h1>

		<div id="polls">
			{{#if empty_poll_list}}
				You don't currently have any polls
				<a href='{{pathFor 'CreatePoll'}}'>Create a new poll</a>
			{{else}}
				POLL LIST
				{{#each polls}}
					{{>PollSummary}}
				{{/each}}
			{{/if}}
		</div>


	{{/if}}

	
</template>

<template name="PollSummary">
	<div class='poll'>
		<p class='remove'>X</p> name: {{name}} votes: {{total_votes}}
		<a href="{{pathFor 'Vote' _id=this._id}}">Vote</a>
		<a href="{{pathFor 'Results' _id=this._id}}">Results</a>
	</div>
</template>


<template name='Vote'>
	
	<div>name: {{poll.name}}, id: {{poll._id}} user: {{poll.user_id}} name: {{username}}</div>
	
	<form id='vote'>
	{{#each poll_options}}
		{{>VoteOption}}
	{{/each}}
	
	<input type='submit' value='VOTE!'>
	</form>
	
</template>

<template name='VoteOption'>
<div>
	<input type='checkbox' class='option' value={{_id}}>{{value}}
</div>
</template>


<template name='Results'>
	<div>name: {{poll.name}}, id: {{poll._id}} user: {{poll.user_id}}</div>
	
	{{#each poll_options}}
		{{>ResultOption}}
	{{/each}}
	
	{{>canvas}}
</template>


<template name='ResultOption'>
	{{value}}: {{votes}}
</template>


<template name='canvas'>
	<div id="results-pie-chart" class='kineticjs-container'>
	</div>	
</template>

<template name='loading'>
	<div class='overlay'>
		<div class='message centered'>
		    Loading 
		</div>
	</div>
</template>


<template name='Account'>
    <div id='account_placeholder'>
		sign-in
	</div>
	{{>Login}}
	{{>CreateUser}}
</template> 

<template name='Login'>
	<div id='login'>
		<form id='login_form'>
			<input type='text' id='login_username' placeholder='Username'>
			<input type='password' id='login_password'>
			<input type='submit'>
		</form>
		<div id='account_switch_to_create_user'>
			create account
		</div>
		{{>AccountCancel}}
	</div>
</template>

<template name='CreateUser'>
	<div id='create_user'>
		<form id='create_user_form'>
			<input type='text' id='create_user_username' placeholder='username'>
			<input type='password' id='create_user_password'>
			<input type='password' id='create_user_confirm_password'>
			<input type='submit'>
		</form>
		<div id='account_switch_to_login'>
			login
		</div>
		{{>AccountCancel}}
	</div>
</template>

<template name='AccountCancel'>
	<div id='account_cancel'>
		cancel
	</div>
</template>
